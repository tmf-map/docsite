(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{356:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return b}));n(0);var r=n(388),s=n(389);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var a={title:"super",sidebar_label:"super"},o=[{value:"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ super",id:"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-super",children:[]},{value:"super çš„ä¸¤ç§ç”¨æ³•ä¸å«ä¹‰",id:"super-çš„ä¸¤ç§ç”¨æ³•ä¸å«ä¹‰",children:[{value:"ä½œä¸ºå‡½æ•°ä½¿ç”¨",id:"ä½œä¸ºå‡½æ•°ä½¿ç”¨",children:[]},{value:"ä½œä¸ºå¯¹è±¡ä½¿ç”¨",id:"ä½œä¸ºå¯¹è±¡ä½¿ç”¨",children:[]}]},{value:"React class ä¸­çš„ super",id:"react-class-ä¸­çš„-super",children:[{value:"React ä¸­ä½¿ç”¨ç»§æ‰¿ super(props) çš„ç›®çš„",id:"react-ä¸­ä½¿ç”¨ç»§æ‰¿-superprops-çš„ç›®çš„",children:[]},{value:"ä¸ºä»€ä¹ˆè¦ä¼ é€’ props å‚æ•°",id:"ä¸ºä»€ä¹ˆè¦ä¼ é€’-props-å‚æ•°",children:[]},{value:"èƒ½ç”¨ super() ä»£æ›¿ super(props) å—",id:"èƒ½ç”¨-super-ä»£æ›¿-superprops-å—",children:[]}]},{value:"æ›´å¤šé˜…è¯»",id:"æ›´å¤šé˜…è¯»",children:[]}],l={rightToc:o},i="wrapper";function b(e){var t=e.components,n=p(e,["components"]);return Object(r.b)(i,c({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-super"},"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ super"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"this")," æ˜¯ç”±è°ƒç”¨è€…å†³å®šçš„ã€‚å­ç±»è‡ªå·±çš„ ",Object(r.b)("inlineCode",{parentName:"p"},"this")," å¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆæ„é€ ï¼Œå¾—åˆ°ä¸çˆ¶ç±»åŒæ ·çš„",Object(r.b)("strong",{parentName:"p"},"å®ä¾‹å±æ€§å’Œæ–¹æ³•"),"ï¼Œç„¶åå†å¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»è‡ªå·±çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœä¸è°ƒç”¨ ",Object(r.b)("inlineCode",{parentName:"p"},"super")," æ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ° ",Object(r.b)("inlineCode",{parentName:"p"},"this")," å¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹å­ç±»çš„è¿›è¡ŒåŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»è‡ªå·±çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•å°±æ— æ³•å®ç°ã€‚"),Object(r.b)(s.a,{type:"must",mdxType:"Hint"},"è¦æƒ³åœ¨å­ç±»ä¸­ä½¿ç”¨ `this` å¾—å…ˆè°ƒç”¨ `super()` å°†çˆ¶ç±» `constructor` å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•æŒ‚åˆ°è‡ªå·±çš„ `this` ä¸Šåå†è¿›è¡Œæ‰©å±•ã€‚"),Object(r.b)("h2",{id:"super-çš„ä¸¤ç§ç”¨æ³•ä¸å«ä¹‰"},"super çš„ä¸¤ç§ç”¨æ³•ä¸å«ä¹‰"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"super")," è¿™ä¸ªå…³é”®å­—æœ‰ä¸¤ç§ç”¨æ³•ï¼šä½œä¸ºå‡½æ•°æˆ–å¯¹è±¡ä½¿ç”¨ï¼Œåˆ†åˆ«æŒ‡ä»£ï¼š",Object(r.b)("strong",{parentName:"p"},"çˆ¶ç±»æ„é€ å‡½æ•°"),"å’Œ",Object(r.b)("strong",{parentName:"p"},"çˆ¶ç±»åŸå‹å¯¹è±¡"),"ã€‚"),Object(r.b)("h3",{id:"ä½œä¸ºå‡½æ•°ä½¿ç”¨"},"ä½œä¸ºå‡½æ•°ä½¿ç”¨"),Object(r.b)("p",null,"ä½œä¸ºå‡½æ•°ç”¨åªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¹‹ä¸­ï¼Œä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ES2015 ä¸­å­ç±»çš„æ„é€ å‡½æ•°è§„å®šå¿…é¡»è¦æ‰§è¡Œä¸€æ¬¡ ",Object(r.b)("inlineCode",{parentName:"p"},"super")," å‡½æ•°ã€‚å¦å¤–å¦‚æœå­ç±»æ²¡æœ‰æŒ‡å®šæ„é€ å‡½æ•°ï¼ŒES2015 ä¼šæä¾›é»˜è®¤çš„ç±»æ„é€ å‡½æ•°ã€‚å› æ­¤ï¼Œæ²¡æœ‰å¿…è¦æä¾›ä¸€ä¸ªç©ºæ„é€ å‡½æ•°æˆ–ä¸€ä¸ªç®€å•åœ°å§”æ‰˜ç»™å®ƒçš„çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š"),Object(r.b)("pre",null,Object(r.b)("code",c({parentName:"pre"},{className:"language-js"}),'class A {\n   constructor () {\n   }\n}\n\nclass A extends B {\n   /*eslint no-useless-constructor: "error"*/\n   constructor (...args) {\n     super(...args);\n   }\n}\n')),Object(r.b)(s.a,{type:"warning",mdxType:"Hint"},"`super` è™½ç„¶ä»£è¡¨äº†çˆ¶ç±» A çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å­ç±» B çš„å®ä¾‹ï¼Œå³ `super` å†…éƒ¨çš„ `this` æŒ‡çš„æ˜¯ B çš„å®ä¾‹ï¼Œå› æ­¤ `super()` åœ¨è¿™é‡Œç›¸å½“äº `A.prototype.constructor.call(this)` ã€‚"),Object(r.b)("pre",null,Object(r.b)("code",c({parentName:"pre"},{className:"language-js"}),"class A {\n  constructor() {\n    console.log(new.target.name);\n  }\n}\nclass B extends A {\n  constructor() {\n    super();\n  }\n}\nnew A() // A\nnew B() // B\n")),Object(r.b)("p",null,"ä¸Šé¢ä»£ç ä¸­ï¼Œ ",Object(r.b)("inlineCode",{parentName:"p"},"new.target")," æŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ ",Object(r.b)("inlineCode",{parentName:"p"},"super()")," æ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‡å‘çš„æ˜¯å­ç±» B çš„æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯çˆ¶ç±» A çš„æ„é€ å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ ",Object(r.b)("inlineCode",{parentName:"p"},"super()")," å†…éƒ¨çš„ ",Object(r.b)("inlineCode",{parentName:"p"},"this")," æŒ‡å‘çš„æ˜¯ B ã€‚"),Object(r.b)("p",null,"ä½œä¸ºå‡½æ•°æ—¶ï¼Œ ",Object(r.b)("inlineCode",{parentName:"p"},"super()")," åªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¹‹ä¸­ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹å°±ä¼šæŠ¥é”™ã€‚"),Object(r.b)("pre",null,Object(r.b)("code",c({parentName:"pre"},{className:"language-js"}),"class A {}\n\nclass B extends A {\n  m() {\n    super(); // æŠ¥é”™\n  }\n}\n")),Object(r.b)("h3",{id:"ä½œä¸ºå¯¹è±¡ä½¿ç”¨"},"ä½œä¸ºå¯¹è±¡ä½¿ç”¨"),Object(r.b)("p",null,"ä½œä¸ºå¯¹è±¡æ—¶åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çš„æ˜¯",Object(r.b)("strong",{parentName:"p"},"çˆ¶ç±»åŸå‹å¯¹è±¡"),"ï¼Œè€Œæˆ–çˆ¶ç±»çš„éå®ä¾‹æˆ– ",Object(r.b)("inlineCode",{parentName:"p"},"this")," ã€‚åœ¨é™æ€æ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»ã€‚"),Object(r.b)("pre",null,Object(r.b)("code",c({parentName:"pre"},{className:"language-js"}),"class A {\n  p() {\n    return 2;\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    console.log(super.p()); // 2\n  }\n}\n\nlet b = new B();\n")),Object(r.b)("p",null,"ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±» B å½“ä¸­çš„ ",Object(r.b)("inlineCode",{parentName:"p"},"super.p()")," ï¼Œå°±æ˜¯å°† ",Object(r.b)("inlineCode",{parentName:"p"},"super")," å½“ä½œä¸€ä¸ªå¯¹è±¡ä½¿ç”¨ã€‚è¿™æ—¶ï¼Œ ",Object(r.b)("inlineCode",{parentName:"p"},"super")," åœ¨æ™®é€šæ–¹æ³•ä¹‹ä¸­ï¼ŒæŒ‡å‘ ",Object(r.b)("inlineCode",{parentName:"p"},"A.prototype")," ï¼Œæ‰€ä»¥ ",Object(r.b)("inlineCode",{parentName:"p"},"super.p()")," å°±ç›¸å½“äº ",Object(r.b)("inlineCode",{parentName:"p"},"A.prototype.p()")," ã€‚"),Object(r.b)(s.a,{type:"warning",mdxType:"Hint"},"ç”±äº `super` æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œæ‰€ä»¥å®šä¹‰åœ¨çˆ¶ç±»**å®ä¾‹ä¸Šçš„æ–¹æ³•æˆ–å±æ€§**ï¼Œæ˜¯æ— æ³•é€šè¿‡ `super` è°ƒç”¨çš„ã€‚"),Object(r.b)("pre",null,Object(r.b)("code",c({parentName:"pre"},{className:"language-js"}),"class A {\n  constructor() {\n    this.p = 2;\n  }\n}\n\nclass B extends A {\n  get m() {\n    return super.p;\n  }\n}\n\nlet b = new B();\nb.m // undefined\n")),Object(r.b)("p",null,"ä¸Šé¢ä»£ç ä¸­ï¼Œp æ˜¯çˆ¶ç±» A å®ä¾‹çš„å±æ€§ï¼Œ ",Object(r.b)("inlineCode",{parentName:"p"},"super.p")," å°±å¼•ç”¨ä¸åˆ°å®ƒã€‚"),Object(r.b)("h2",{id:"react-class-ä¸­çš„-super"},"React class ä¸­çš„ super"),Object(r.b)("h3",{id:"react-ä¸­ä½¿ç”¨ç»§æ‰¿-superprops-çš„ç›®çš„"},"React ä¸­ä½¿ç”¨ç»§æ‰¿ super(props) çš„ç›®çš„"),Object(r.b)("p",null,"React ä¹Ÿå¿…é¡»éµå¾ª JS ï¼Œå¼ºåˆ¶åœ¨ ",Object(r.b)("inlineCode",{parentName:"p"},"constructor")," ä¸­å¿…é¡»å…ˆè°ƒç”¨ ",Object(r.b)("inlineCode",{parentName:"p"},"super")," æ‰èƒ½å¼•ç”¨ ",Object(r.b)("inlineCode",{parentName:"p"},"this")," ã€‚"),Object(r.b)(s.a,{type:"must",mdxType:"Hint"},"åœ¨ React class `constructor` ä¸­ä½¿ç”¨ `this.props` å¾—å…ˆè°ƒç”¨ `super(props)` ã€‚"),Object(r.b)("h3",{id:"ä¸ºä»€ä¹ˆè¦ä¼ é€’-props-å‚æ•°"},"ä¸ºä»€ä¹ˆè¦ä¼ é€’ props å‚æ•°"),Object(r.b)("p",null,"æ˜¯ä¸ºäº†åœ¨ ",Object(r.b)("inlineCode",{parentName:"p"},"constructor")," ä¸­ ä½¿ç”¨ ",Object(r.b)("inlineCode",{parentName:"p"},"this.props")," ã€‚è¿™æ ·åœ¨é™¤äº† ",Object(r.b)("inlineCode",{parentName:"p"},"constructor")," çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥è°ƒç”¨ ",Object(r.b)("inlineCode",{parentName:"p"},"this.props"),"ï¼Œæ¯”å¦‚ lifecycleï¼Œcustom methodsã€‚"),Object(r.b)("h3",{id:"èƒ½ç”¨-super-ä»£æ›¿-superprops-å—"},"èƒ½ç”¨ super() ä»£æ›¿ super(props) å—"),Object(r.b)("p",null,"æœ€å¥½ä¸è¦ï¼Œæ¯•ç«Ÿè¿™æ ·å†™åœ¨é€»è¾‘ä¸Šå¹¶ä¸æ˜ç¡®ç¡®ï¼ŒReact ä¼šåœ¨",Object(r.b)("strong",{parentName:"p"},"æ„é€ å‡½æ•°æ‰§è¡Œå®Œæ¯•å"),"ç»™ ",Object(r.b)("inlineCode",{parentName:"p"},"this.props")," èµ‹å€¼ã€‚å¦‚æœè¿™æ ·å†™ä½¿å¾— ",Object(r.b)("inlineCode",{parentName:"p"},"this.props")," åœ¨ ",Object(r.b)("inlineCode",{parentName:"p"},"super")," è°ƒç”¨ä¸€ç›´åˆ°æ„é€ å‡½æ•°ç»“æŸæœŸé—´å€¼ä¸º ",Object(r.b)("inlineCode",{parentName:"p"},"undefined")," ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š"),Object(r.b)("pre",null,Object(r.b)("code",c({parentName:"pre"},{className:"language-jsx"}),"class Button extends React.Component {\n constructor(props) {\n   super(); // ğŸ˜¬ æˆ‘ä»¬å¿˜äº†ä¼ å…¥ props\n   console.log(props);      // âœ… {}\n   console.log(this.props); // ğŸ˜¬ undefined\n }\n // ...\n}\n")),Object(r.b)(s.a,{type:"warning",mdxType:"Hint"},"å¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¼ é€’å‚æ•°ï¼ŒReact ä¼šåœ¨æˆ‘ä»¬çš„ç±»ç»„ä»¶ `constructor` **è°ƒç”¨ä¹‹å**ï¼Œä¸ºæˆ‘ä»¬çš„ç»„ä»¶å®ä¾‹åˆ†é… `props` ã€‚"),Object(r.b)(s.a,{type:"better",mdxType:"Hint"},"React å®˜æ–¹æ–‡æ¡£é‡Œé¢æœ‰ä¸€å¥ [Class components should always call the base constructor with props](https://reactjs.org/docs/state-and-lifecycle.html#adding-local-state-to-a-class)."),Object(r.b)("h2",{id:"æ›´å¤šé˜…è¯»"},"æ›´å¤šé˜…è¯»"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("a",c({parentName:"li"},{href:"http://es6.ruanyifeng.com/#docs/class-extends#super-%E5%85%B3%E9%94%AE%E5%AD%97"}),"ECMAScript 6 å…¥é—¨ï¼šClass çš„ç»§æ‰¿ï¼Œä½œè€…ï¼šé˜®ä¸€å³°")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("a",c({parentName:"li"},{href:"https://www.google.com/url?q=https://overreacted.io/zh-hans/why-do-we-write-super-props/&sa=D&ust=1570507768778000"}),"Why Do We Write super(props)? By Dan"))))}b.isMDXComponent=!0},389:function(e,t,n){"use strict";var r=n(0),s=n.n(r),c=n(391),p=n.n(c),a=(n(390),{better:{name:"æ¨è",color:"#50c610",icon:s.a.createElement("svg",{preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",className:"custom-hint__icon",style:{color:"#50c610"}},s.a.createElement("g",null,s.a.createElement("path",{d:"M22 11.07V12a10 10 0 1 1-5.93-9.14"}),s.a.createElement("polyline",{points:"23 3 12 14 9 11"})))},must:{name:"å¼ºåˆ¶",color:"#ff4642",icon:s.a.createElement("svg",{preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",fill:"#ff4642",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",stroke:"none",className:"custom-hint__icon"},s.a.createElement("g",null,s.a.createElement("path",{d:"M512 992c-262.4 0-480-217.6-480-480 0-262.4 217.6-480 480-480s480 217.6 480 480C992 774.4 774.4 992 512 992zM512 108.8C288 108.8 108.8 288 108.8 512c0 224 179.2 403.2 403.2 403.2s403.2-179.2 403.2-403.2C915.2 288 736 108.8 512 108.8zM697.6 684.8l-12.8 12.8c-6.4 6.4-19.2 6.4-25.6 0L512 550.4l-140.8 140.8c-6.4 6.4-19.2 6.4-25.6 0l-12.8-12.8c-6.4-6.4-6.4-19.2 0-25.6L473.6 512 326.4 371.2C320 358.4 320 345.6 326.4 339.2l12.8-12.8C345.6 320 358.4 320 371.2 326.4L512 473.6l140.8-140.8c6.4-6.4 19.2-6.4 25.6 0l12.8 12.8c6.4 6.4 6.4 19.2 0 25.6L550.4 512l140.8 140.8C704 665.6 704 678.4 697.6 684.8z"})))},tip:{name:"æç¤º",color:"#3884ff",icon:s.a.createElement("svg",{preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"none",className:"custom-hint__icon",style:{color:"#3884ff"}},s.a.createElement("g",null,s.a.createElement("path",{d:"M12.2 8.98c.06-.01.12-.03.18-.06.06-.02.12-.05.18-.09l.15-.12c.18-.19.29-.45.29-.71 0-.06-.01-.13-.02-.19a.603.603 0 0 0-.06-.19.757.757 0 0 0-.09-.18c-.03-.05-.08-.1-.12-.15-.28-.27-.72-.37-1.09-.21-.13.05-.23.12-.33.21-.04.05-.09.1-.12.15-.04.06-.07.12-.09.18-.03.06-.05.12-.06.19-.01.06-.02.13-.02.19 0 .26.11.52.29.71.1.09.2.16.33.21.12.05.25.08.38.08.06 0 .13-.01.2-.02M13 16v-4a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0M12 3c-4.962 0-9 4.038-9 9 0 4.963 4.038 9 9 9 4.963 0 9-4.037 9-9 0-4.962-4.037-9-9-9m0 20C5.935 23 1 18.065 1 12S5.935 1 12 1c6.066 0 11 4.935 11 11s-4.934 11-11 11",fillRule:"evenodd"})))},warning:{name:"æ³¨æ„",color:"#fdbe12",icon:s.a.createElement("svg",{preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",className:"custom-hint__icon",style:{color:"#fdbe12"}},s.a.createElement("g",null,s.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),s.a.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),s.a.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"16"})))}});t.a=function(e){var t=e.type,n=e.children;return s.a.createElement("div",{className:"custom-hint",style:{borderLeft:"4px solid ".concat(a[t].color)}},s.a.createElement("div",{style:{float:"left"}},a[t].icon),s.a.createElement("div",{dangerouslySetInnerHTML:{__html:p()("<strong>".concat(a[t].name,"</strong>ï¼š").concat(n))}}))}},390:function(e,t,n){}}]);